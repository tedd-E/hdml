============================Starting loading mnist==========================#
=================================mnist loaded===============================#
Connection returned with result code:0
 * Serving Flask app "app_nn" (lazy loading)
0
 * Environment: production
[31m   WARNING: This is a development server. Do not use it in a production deployment.
0
   Use a production WSGI server instead.
 * Debug mode: off
0
0
0
0
0
onSubscribe :1
onSubscribe :2
onSubscribe :3
onSubscribe :4
onSubscribe :5
onSubscribe :6
onSubscribe :7
transform_tensor_to_list
json string size = 9641400
json string size = 9641400
json string size = 9641400
json string size = 9641400
json string size = 9641400
json string size = 9641400
json string size = 9641400
transform_tensor_to_list
json string size = 9641691
json string size = 9641691
json string size = 9641691
json string size = 9641691
json string size = 9641691
json string size = 9641691
json string size = 9641691
transform_tensor_to_list
json string size = 9641089
json string size = 9641089
json string size = 9641089
json string size = 9641089
json string size = 9641089
json string size = 9641089
json string size = 9641089
transform_tensor_to_list
json string size = 9640215
json string size = 9640215
json string size = 9640215
json string size = 9640215
json string size = 9640215
json string size = 9640215
json string size = 9640215
transform_tensor_to_list
json string size = 9640222
json string size = 9640222
json string size = 9640222
json string size = 9640222
INFO:root:*********partition data***************
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:Label distribution on client:[60, 60, 60, 60, 60, 60, 60, 60, 60, 60]
INFO:root:traindata_cls_counts = {0: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 1: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 2: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 3: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 4: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 5: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}, 6: {0: 60, 1: 60, 2: 60, 3: 60, 4: 60, 5: 60, 6: 60, 7: 60, 8: 60, 9: 60}}
INFO:root:train_dl_global number = 600
INFO:root:test_dl_global number = 100
INFO:root:client_idx = 0, local_sample_number = 600
INFO:root:client_idx = 0, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 1, local_sample_number = 600
INFO:root:client_idx = 1, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 2, local_sample_number = 600
INFO:root:client_idx = 2, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 3, local_sample_number = 600
INFO:root:client_idx = 3, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 4, local_sample_number = 600
INFO:root:client_idx = 4, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 5, local_sample_number = 600
INFO:root:client_idx = 5, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:client_idx = 6, local_sample_number = 600
INFO:root:client_idx = 6, batch_num_train_local = 6, batch_num_test_local = 100
INFO:root:create_model. model_name = nn, output_dim = 10
WARNING:werkzeug: * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
INFO:werkzeug: * Running on http://10.0.137.51:5000/ (Press CTRL+C to quit)
INFO:werkzeug:10.0.137.38 - - [15/Feb/2022 10:07:52] "POST /api/register?device_id=4 HTTP/1.1" 200 -
INFO:werkzeug:10.0.137.46 - - [15/Feb/2022 10:07:54] "POST /api/register?device_id=3 HTTP/1.1" 200 -
INFO:werkzeug:10.0.137.53 - - [15/Feb/2022 10:07:58] "POST /api/register?device_id=2 HTTP/1.1" 200 -
INFO:werkzeug:10.0.137.84 - - [15/Feb/2022 10:08:01] "POST /api/register?device_id=1 HTTP/1.1" 200 -
INFO:werkzeug:10.0.137.61 - - [15/Feb/2022 10:08:04] "POST /api/register?device_id=5 HTTP/1.1" 200 -
INFO:werkzeug:10.0.137.82 - - [15/Feb/2022 10:08:06] "POST /api/register?device_id=0 HTTP/1.1" 200 -
INFO:root:add_model. index = 1
INFO:root:round=0 b_all_received=False
INFO:root:add_model. index = 0
INFO:root:round=0 b_all_received=False
INFO:root:add_model. index = 3
INFO:root:round=0 b_all_received=False
INFO:root:add_model. index = 5
INFO:root:round=0 b_all_received=False
INFO:root:add_model. index = 4
INFO:root:round=0 b_all_received=False
INFO:werkzeug:10.0.137.44 - - [15/Feb/2022 10:08:51] "POST /api/register?device_id=6 HTTP/1.1" 200 -
INFO:root:add_model. index = 6
INFO:root:round=0 b_all_received=False
INFO:root:add_model. index = 2
INFO:root:round=0 b_all_received=True
INFO:root:len of self.model_dict[idx] = 7
INFO:root:aggregate time cost: 0
INFO:root:################test_on_server_for_all_clients : 0
INFO:root:{'training_acc': 0.8238095238095238, 'training_loss': 0.824986111550104}
INFO:root:{'test_acc': 0.8197, 'test_loss': 0.8128600892424583}
INFO:root:send_message_sync_model_to_client. receive_id = 1
INFO:root:topic = fedml0_1
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 2
INFO:root:topic = fedml0_2
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 3
INFO:root:topic = fedml0_3
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 4
INFO:root:topic = fedml0_4
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 5
INFO:root:topic = fedml0_5
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 6
INFO:root:topic = fedml0_6
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 7
INFO:root:topic = fedml0_7
INFO:root:sent
INFO:root:add_model. index = 1
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 5
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 3
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 0
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 4
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 6
INFO:root:round=1 b_all_received=False
INFO:root:add_model. index = 2
INFO:root:round=1 b_all_received=True
INFO:root:len of self.model_dict[idx] = 7
INFO:root:aggregate time cost: 0
INFO:root:################test_on_server_for_all_clients : 1
INFO:root:{'training_acc': 0.9002380952380953, 'training_loss': 0.31610090214581715}
INFO:root:{'test_acc': 0.9046, 'test_loss': 0.31300241010263563}
INFO:root:send_message_sync_model_to_client. receive_id = 1
INFO:root:topic = fedml0_1
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 2
INFO:root:topic = fedml0_2
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 3
INFO:root:topic = fedml0_3
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 4
INFO:root:topic = fedml0_4
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 5
INFO:root:topic = fedml0_5
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 6
INFO:root:topic = fedml0_6
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 7
INFO:root:topic = fedml0_7
INFO:root:sent
INFO:root:add_model. index = 1
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 3
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 5
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 0
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 6
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 4
INFO:root:round=2 b_all_received=False
INFO:root:add_model. index = 2
INFO:root:round=2 b_all_received=True
INFO:root:len of self.model_dict[idx] = 7
INFO:root:aggregate time cost: 0
INFO:root:################test_on_server_for_all_clients : 2
INFO:root:{'training_acc': 0.9328571428571428, 'training_loss': 0.21850711355606714}
INFO:root:{'test_acc': 0.9302, 'test_loss': 0.22919777730479837}
INFO:root:send_message_sync_model_to_client. receive_id = 1
INFO:root:topic = fedml0_1
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 2
INFO:root:topic = fedml0_2
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 3
INFO:root:topic = fedml0_3
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 4
INFO:root:topic = fedml0_4
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 5
INFO:root:topic = fedml0_5
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 6
INFO:root:topic = fedml0_6
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 7
INFO:root:topic = fedml0_7
INFO:root:sent
INFO:root:add_model. index = 3
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 5
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 1
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 0
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 4
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 6
INFO:root:round=3 b_all_received=False
INFO:root:add_model. index = 2
INFO:root:round=3 b_all_received=True
INFO:root:len of self.model_dict[idx] = 7
INFO:root:aggregate time cost: 0
INFO:root:################test_on_server_for_all_clients : 3
INFO:root:{'training_acc': 0.9480952380952381, 'training_loss': 0.17026820911892823}
INFO:root:{'test_acc': 0.9404, 'test_loss': 0.1924292097147554}
INFO:root:send_message_sync_model_to_client. receive_id = 1
INFO:root:topic = fedml0_1
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 2
INFO:root:topic = fedml0_2
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 3
INFO:root:topic = fedml0_3
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 4
INFO:root:topic = fedml0_4
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 5
INFO:root:topic = fedml0_5
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 6
INFO:root:topic = fedml0_6
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 7
INFO:root:topic = fedml0_7
INFO:root:sent
INFO:root:add_model. index = 3
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 1
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 0
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 6
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 5
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 4
INFO:root:round=4 b_all_received=False
INFO:root:add_model. index = 2
INFO:root:round=4 b_all_received=True
INFO:root:len of self.model_dict[idx] = 7
INFO:root:aggregate time cost: 0
INFO:root:################test_on_server_for_all_clients : 4
INFO:root:{'training_acc': 0.9566666666666667, 'training_loss': 0.13877279479943572}
INFO:root:{'test_acc': 0.9479, 'test_loss': 0.16854099401971326}
INFO:root:send_message_sync_model_to_client. receive_id = 1
INFO:root:topic = fedml0_1
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 2
INFO:root:topic = fedml0_2
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 3
INFO:root:topic = fedml0_3
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 4
INFO:root:topic = fedml0_4
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 5
INFO:root:topic = fedml0_5
INFO:root:sent
INFO:root:send_message_sync_model_to_client. receive_id = 6
INFO:root:topic = fedml0_6